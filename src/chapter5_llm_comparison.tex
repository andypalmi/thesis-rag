\chapter{Comparative Analysis of Different LLMs}
\label{chap:llm_comparison}

The Large Language Model functions as the generative component within the RAG system, tasked with synthesizing retrieved information and producing the final response. The selection of the generator LLM represents a pivotal decision that profoundly influences the system's overall performance, cost, and latency. This chapter presents a comparative analysis of various LLMs within the RAG context, examining how their architectural distinctions, context window capacities, and intrinsic capabilities influence their suitability for the generation task.

\section{The Role of the Generator LLM}
Within a RAG pipeline, the LLM's function is not to retrieve facts from its internal parametric memory but rather to reason upon the provided context. As emphasized by Gao et al. (2024) \autocite{gao2024retrievalaugmentedgenerationlargelanguage}, the optimal generator LLM should demonstrate proficiency in:
\begin{itemize}
    \item \textbf{Context Adherence (Faithfulness):} Strictly grounding its response in the provided context and precluding the introduction of extraneous information.
    \item \textbf{Information Synthesis:} Synthesizing facts from multiple retrieved chunks into a singular, coherent answer.
    \item \textbf{Instruction Following:} Precisely adhering to the instructions within the prompt, including compliance with a specified output format or persona.
    \item \textbf{Noise Resistance:} Disregarding irrelevant or contradictory information within the context and prioritizing the most pertinent facts.
\end{itemize}

\section{Evaluating LLMs by Model and Context Size}
Different LLMs demonstrate diverse levels of proficiency across these dimensions. The performance of a RAG system is consequently highly contingent upon the specific model selected for the generation step. This section assesses various models against these criteria.

\subsection{Comparing LLM Families}
LLMs can be categorized into several families, each possessing distinct characteristics. Our experiments assessed models from the following prominent families:
\begin{itemize}
    \item \textbf{GPT (Generative Pre-trained Transformer) Series (e.g., GPT-4o, GPT-4):} Developed by OpenAI, these models are recognized for their robust reasoning, instruction-following capabilities, and multimodal understanding. They have consistently demonstrated high performance in synthesizing complex information, making them a favored selection for high-quality RAG systems \autocite{openai2024gpt4technicalreport}.
    \item \textbf{Llama Series (e.g., Llama 3, Llama 2):} Developed by Meta, these constitute potent open-source models that have achieved substantial competitiveness with their proprietary counterparts. They provide a robust equilibrium between performance and customizability, enabling fine-tuning on specific domains \autocite{touvron2023llama, grattafiori2024llama3herdmodels}.
    \item \textbf{Claude Series (e.g., Claude 3.5 Sonnet, Claude 3 Opus, Claude 3 Haiku):} Developed by Anthropic, these models are particularly distinguished by their extensive context windows and robust performance on tasks necessitating complex reasoning and a profound comprehension of lengthy documents \autocite{anthropic2024claude3}.
    \item \textbf{Gemini Series (e.g., Gemini 1.5 Pro, Gemini 1.5 Flash):} Developed by Google, the Gemini models are intrinsically multimodal and engineered for high performance across a broad spectrum of tasks. They have exhibited robust performance in both retrieval and generation, establishing them as a versatile option for RAG systems \autocite{gemini2025}.
    \item \textbf{DeepSeek Series (e.g., DeepSeek-V3, DeepSeek-V2):} Developed by DeepSeek AI, these open-source models are known for their innovative Mixture-of-Experts (MoE) architectures, efficient training strategies, and strong performance in areas like reasoning, coding, and mathematics. They offer extended context lengths and excel in multilingual tasks \autocite{deepseekai2025deepseekv3technicalreport}.
    \item \textbf{Qwen Series (e.g., Qwen3, Qwen2.5):} Developed by Alibaba Cloud, the Qwen series includes both dense and MoE architectures, offering models with varying parameter scales and strong multilingual capabilities. They are recognized for their advancements in pre-training and post-training stages, including specialized models for long-context and multimodal applications \autocite{yang2025qwen3technicalreport, qwen2025qwen25technicalreport}.
\end{itemize}

\subsection{The Impact of Context Window Size}
The \textbf{context window size} of an LLM delineates the maximum volume of text (prompt + retrieved context + generated response) that the model can process concurrently. This carries several implications for RAG, as elucidated by Gao et al. (2024) \autocite{gao2024retrievalaugmentedgenerationlargelanguage}:
\begin{itemize}
    \item \textbf{Information Density:} A larger context window facilitates the inclusion of a greater number of retrieved chunks to the LLM, potentially enhancing the comprehensiveness of the generated answer. However, this concurrently elevates the risk of the \enquote{lost in the middle} problem, wherein the model may disregard pertinent information embedded within an extensive context \autocite{liu2023lostmiddlelanguagemodels}.
    \item \textbf{Cost and Latency:} Processing larger contexts incurs greater computational expense, resulting in elevated operational costs and prolonged response times.
    \item \textbf{Architectural Differences:} Newer models featuring exceptionally large context windows (e.g., Gemini family of models with a context window of 1 million tokens) are engineered to more effectively locate and utilize information within extensive documents, which can confer a substantial advantage for specific RAG applications.
\end{itemize}

\section{Trade-offs in LLM Selection}
Selecting the appropriate LLM for a RAG system necessitates balancing several factors:
\begin{itemize}
    \item \textbf{Performance:} The quality of the generated output, quantified by metrics such as faithfulness, relevancy, and accuracy.
    \item \textbf{Cost:} The financial cost per generated token, which can fluctuate considerably among models.
    \item \textbf{Speed (Latency):} The latency incurred by the model in generating a response.
    \item \textbf{Customizability:} The capacity to fine-tune the model on domain-specific data, a process frequently more straightforward with open-source models.
\end{itemize}

Ultimately, the optimal selection is contingent upon the specific requirements of the application. A customer-facing chatbot might prioritize rapid response and low operational cost, whereas a legal research assistant would prioritize maximal accuracy and faithfulness, even at a greater computational expense.
